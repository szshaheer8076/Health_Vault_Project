{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar API_URL = 'http://192.1681.23:5000/api';\nvar api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napi.interceptors.request.use(function () {\n  var _ref = _asyncToGenerator(function* (config) {\n    var token = yield AsyncStorage.getItem('sessionToken');\n    if (token) {\n      config.headers['x-auth-token'] = token;\n    }\n    return config;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  return Promise.reject(error);\n});\nexport var register = function register(email, password, name) {\n  return api.post('/auth/register', {\n    email: email,\n    password: password,\n    name: name\n  });\n};\nexport var login = function login(email, password) {\n  return api.post('/auth/login', {\n    email: email,\n    password: password\n  });\n};\nexport var logout = function logout() {\n  return api.post('/auth/logout');\n};\nexport var getPatients = function getPatients() {\n  return api.get('/patients');\n};\nexport var getPatient = function getPatient(id) {\n  return api.get(`/patients/${id}`);\n};\nexport var addPatient = function addPatient(patientData) {\n  return api.post('/patients', patientData);\n};\nexport var updatePatient = function updatePatient(id, patientData) {\n  return api.put(`/patients/${id}`, patientData);\n};\nexport var deletePatient = function deletePatient(id) {\n  return api.delete(`/patients/${id}`);\n};\nexport var searchPatients = function searchPatients(query) {\n  return api.get(`/patients/search?query=${query}`);\n};\nexport var getMedications = function getMedications(patientId) {\n  return api.get(`/medications/${patientId}`);\n};\nexport var addMedication = function addMedication(patientId, medicationData) {\n  return api.post(`/medications/${patientId}`, medicationData);\n};\nexport var deleteMedication = function deleteMedication(id) {\n  return api.delete(`/medications/${id}`);\n};\nexport var getDocuments = function getDocuments(patientId) {\n  return api.get(`/documents/${patientId}`);\n};\nexport var uploadDocument = function () {\n  var _ref2 = _asyncToGenerator(function* (patientId, title, fileUri) {\n    var formData = new FormData();\n    formData.append('title', title);\n    var filename = fileUri.split('/').pop();\n    var match = /\\.(\\w+)$/.exec(filename);\n    var type = match ? `image/${match[1]}` : 'image';\n    formData.append('file', {\n      uri: fileUri,\n      name: filename,\n      type: type\n    });\n    return api.post(`/documents/${patientId}`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  });\n  return function uploadDocument(_x2, _x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var deleteDocument = function deleteDocument(id) {\n  return api.delete(`/documents/${id}`);\n};\nexport default api;","map":{"version":3,"names":["axios","AsyncStorage","API_URL","api","create","baseURL","headers","interceptors","request","use","_ref","_asyncToGenerator","config","token","getItem","_x","apply","arguments","error","Promise","reject","register","email","password","name","post","login","logout","getPatients","get","getPatient","id","addPatient","patientData","updatePatient","put","deletePatient","delete","searchPatients","query","getMedications","patientId","addMedication","medicationData","deleteMedication","getDocuments","uploadDocument","_ref2","title","fileUri","formData","FormData","append","filename","split","pop","match","exec","type","uri","_x2","_x3","_x4","deleteDocument"],"sources":["C:/Users/malik/OneDrive/Desktop/Health_Vault_Project/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Change this to your computer's IP address when testing\r\nconst API_URL = 'http://192.1681.23:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\napi.interceptors.request.use(\r\n  async (config) => {\r\n    const token = await AsyncStorage.getItem('sessionToken');\r\n    if (token) {\r\n      config.headers['x-auth-token'] = token;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth APIs\r\nexport const register = (email, password, name) => {\r\n  return api.post('/auth/register', { email, password, name });\r\n};\r\n\r\nexport const login = (email, password) => {\r\n  return api.post('/auth/login', { email, password });\r\n};\r\n\r\nexport const logout = () => {\r\n  return api.post('/auth/logout');\r\n};\r\n\r\n// Patient APIs\r\nexport const getPatients = () => {\r\n  return api.get('/patients');\r\n};\r\n\r\nexport const getPatient = (id) => {\r\n  return api.get(`/patients/${id}`);\r\n};\r\n\r\nexport const addPatient = (patientData) => {\r\n  return api.post('/patients', patientData);\r\n};\r\n\r\nexport const updatePatient = (id, patientData) => {\r\n  return api.put(`/patients/${id}`, patientData);\r\n};\r\n\r\nexport const deletePatient = (id) => {\r\n  return api.delete(`/patients/${id}`);\r\n};\r\n\r\nexport const searchPatients = (query) => {\r\n  return api.get(`/patients/search?query=${query}`);\r\n};\r\n\r\n// Medication APIs\r\nexport const getMedications = (patientId) => {\r\n  return api.get(`/medications/${patientId}`);\r\n};\r\n\r\nexport const addMedication = (patientId, medicationData) => {\r\n  return api.post(`/medications/${patientId}`, medicationData);\r\n};\r\n\r\nexport const deleteMedication = (id) => {\r\n  return api.delete(`/medications/${id}`);\r\n};\r\n\r\n// Document APIs\r\nexport const getDocuments = (patientId) => {\r\n  return api.get(`/documents/${patientId}`);\r\n};\r\n\r\nexport const uploadDocument = async (patientId, title, fileUri) => {\r\n  const formData = new FormData();\r\n  formData.append('title', title);\r\n  \r\n  const filename = fileUri.split('/').pop();\r\n  const match = /\\.(\\w+)$/.exec(filename);\r\n  const type = match ? `image/${match[1]}` : 'image';\r\n\r\n  formData.append('file', {\r\n    uri: fileUri,\r\n    name: filename,\r\n    type\r\n  });\r\n\r\n  return api.post(`/documents/${patientId}`, formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  });\r\n};\r\n\r\nexport const deleteDocument = (id) => {\r\n  return api.delete(`/documents/${id}`);\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}